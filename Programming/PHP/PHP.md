# Основные принципы
##  Синтаксис
### Базовые теги
#### Изолирование PHP от HTML
```php
<?php

?>

```

#### Литералы
```php
9         // число девять
17.3      // число с плавающей точкой
"текст"   // строка текста
'h3'      // другая строка
true      // логическое значение (булево)
null      // пустой объект
undefined // неопределённое значение
```

#### Комментарии
```php
#однострочный комментарий 1
//однострочный комментарий 2
/* многострочный
комментарий
:) */ 
```

### Переменные
Сразу после $ следует только буква/символ подчеркивания, далее буквы/цифры/символ подчеркивания в любом количестве
Регистро-зависимы

```php
    $helloStr = "Hello world";
    $number = 15.2;
```

#### Ссылки
##### Присваивание по ссылке
& позволяет получить не само значение переменной, а ее адрес в памяти.
В данном примере $bar становится псевдонимом оригинальной переменной $foo
```php
  $foo= 'Боб';                  // Присваивает $foo значение 'Боб'
  $bar= &$foo;                  // Ссылка на значение переменной $foo через $bar.
  $bar= "Меня зовут $bar<br>";  // Изменение $bar меняет и $foo.
```

##### Символические ссылки
$p содержит ссылку на $a в виде строки (строка 2)
Чтобы получить значение $a через $p, необходимо добавить еще один знак $ (строка 3)
Также можно и изменить значение $a через $p (строка 4)
```php
    $a=10;
    $p="a";             // присваиваем $p имя другой переменной
    echo $$p;           // выводит переменную, на которую ссылается $p, т. е. $a
    $$p=100;
```

#### Основные действия над переменными
print_r удобно использовать для вывода массивов

```php
    $a=10;        //присвоение значения
    echo isset($a)."<br>";  //проверка существования
    echo $a;      //вывод на экран
    print "<br>print не требует скобок, выводим a: $a<br>";
    print_r ($a); //выводит информацию о переменной в удобочитаемом виде
    echo "<br>";
    var_dump($a); //выводит структурированную информацию о переменной
    unset($a);    //удаление переменной
```


#### Константы
Кроме ключевого слова const, константу можно объявить при помощи функции define, в качестве первой переменной принимающей имя константы, а второй – ее значение.
Константы должны быть определены только в самой верхней области видимости (вне циклов, функций, условий и т.д.)

```php
    const A = 10;
    define('B', '1');
    $c = 5;
    if (isset($c)) {
        const C = true; //низя
    }
```
### Операторы
Что важно учитывать:
• Количество операндов (унарные, бинарные и тернарные операторы)
• Тип операндов
• Ассоциативность (направление обработки операндов)
• Приоритет (порядок исполнения операций в сложных выражениях)

| **Оператор**                                             | **Описание**                                                                                                                  | **Ассоциативность** |
| -------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ------------------- |
| NEW                                                      | Создает новый объект                                                                                                          | Справа налево       |
| .  <br>[]  <br>()                                        | Доступ к свойству (точечная нотация)  <br>Индекс массива  <br>Вызов функции                                                   |                     |
| !  <br>~  <br>++, --  <br>+, -  <br>(int, float, string) | Логическое НЕ  <br>Битовое НЕ  <br>Операторы инкремента и декремента  <br>Унарный плюс и минус  <br>Операторы приведения типа | Справа налево       |
| *, /, %                                                  | Умножение, деление, деление по модулю                                                                                         |                     |
| +, -                                                     | Сложение, вычитание                                                                                                           |                     |
| <, <=, >, >=                                             | Операторы сравнения                                                                                                           |                     |
| ==, !=, <>                                               | Операторы сравнения                                                                                                           |                     |
| &&                                                       | Логическое И                                                                                                                  |                     |
| \|\|                                                     | Логическое ИЛИ                                                                                                                |                     |
| ?  :                                                     | Условный (тернарный) оператор                                                                                                 |                     |
| =, +=, -=, *=, …                                         | Операторы присваивания                                                                                                        | Справа налево       |
| AND                                                      | Логическое И                                                                                                                  |                     |
| XOR                                                      | Логическое ИЛИ-НЕ                                                                                                             |                     |
| OR                                                       | Логическое ИЛИ                                                                                                                |                     |
| ,                                                        | Оператор запятая                                                                                                              |                     |
### Типы данных
#### Булевые
boolean – ложь/истина (false/true)
• При выполнении арифметических операций 0 и 1
• При преобразовании в boolean как false рассматриваются:
o числа 0 и 0.0
o “0” и “”
o пустой массив
o null
#### Целые
integer – целые числа в диапазоне от - 2 147 483 648 до 2 147 483 647
• При выходе за границы конвертируется в float
#### С плавающей точкой
float – вещественные числа. Размер зависит от платформы, но чаще всего ~1.8e308 с точностью 14 цифр. Также может обозначаться double или real – разницы нет.
#### Строковые
string – набор символов любой длины (ограничена только объемом свободной памяти)
### Работа со строками, числами, датами
##### работа с отдельными символами
Работаем со строками, как с массивами символов.

Получать символы кириллицы и менять их таким образом можно, но вот вывести при работе с UTF-8 без дополнительных преобразований кодировки не получится (хотя строка целиком выводится без проблем)
![[Pasted image 20240311103834.png]]
##### экранирующие символы
|**Последовательность**|**Значение**|
|---|---|
|\n|новая строка (LF или 0x0A (10) в ASCII)|
|\r|возврат каретки (CR или 0x0D (13) в ASCII)|
|\t|горизонтальная табуляция (HT или 0x09 (9) в ASCII)|
|\v|вертикальная табуляция (VT или 0x0B (11) в ASCII)|
|\e|escape-знак (ESC или 0x1B (27) в ASCII)|
|\f|подача страницы (FF или 0x0C (12) в ASCII)|
|\\|обратная косая черта|
|\$|знак доллара|
|\"|двойная кавычка|
|\[0-7]{1,3}|последовательность символов, соответствующая регулярному выражению символа в восьмеричной системе счисления, который молча переполняется, чтобы поместиться в байт (т.е. "\400" === "\000")|
|\x[0-9A-Fa-f]{1,2}|последовательность символов, соответствующая регулярному выражению символа в шестнадцатеричной системе счисления|
|\u{[0-9A-Fa-f]+}|последовательность символов, соответствующая регулярному выражению символа Unicode, которая отображается в строка в представлении UTF-8|№
##### базовые строковые функции
![[Pasted image 20240311104053.png]]
![[Pasted image 20240311104102.png]]![[Pasted image 20240311104123.png]]
![[Pasted image 20240311104132.png]]Третьим аргументом в WordWrap может быть абсолютно любая последовательность символов
![[Pasted image 20240311104150.png]]
Вторым аргументом в strip_tags может быть строка с тэгами «исключениями»
![[Pasted image 20240311104208.png]]
В начале строки $str 2 пробела, в конце – 1.
• trim убирает и те, и другие
• ltrim убирает только ведущие
• chop убирает только концевые
![[Pasted image 20240311104229.png]]
![[Pasted image 20240311104239.png]]
![[Pasted image 20240311104247.png]]
##### математические функции
![[Pasted image 20240311104254.png]]![[Pasted image 20240311104300.png]]
![[Pasted image 20240311104309.png]]
Все флаги для round:

| PHP_ROUND_HALF_UP   |
| ------------------- |
| PHP_ROUND_HALF_DOWN |
| PHP_ROUND_HALF_EVEN |
| PHP_ROUND_HALF_ODD  |
##### функции работы с датой и временем
![[Pasted image 20240311104354.png]]
getdate() возвращает ассоциативный массив с данными о дате, представленной временной меткой (если она была передана, иначе берется текущие дата и время)

|**Индекс**|**Описание**|**Пример значения**|
|---|---|---|
|"seconds"|Числовое представление секунд|от 0 до 59|
|"minutes"|Числовое представление минут|от 0 до 59|
|"hours"|Числовое представление часов|от 0 до 23|
|"mday"|Порядковый номер дня месяца|от 1 до 31|
|"wday"|Порядковый номер дня недели|от 0 (воскресенье) до 6 (суббота)|
|"mon"|Порядковый номер месяца|от 1 до 12|
|"year"|Номер года, 4 цифры|Примеры: 1999, 2003|
|"yday"|Порядковый номер дня в году|от 0 до 365|
|"weekday"|Полное наименование дня недели|от Sunday до Saturday|
|"month"|Полное наименование месяца, например, January или March|от January до December|
|0|Количество секунд, прошедших с начала эпохи Unix (The Unix Epoch), подобно значению, возвращаемому функцией [time()](https://www.php.net/manual/ru/function.time.php) и используемому функцией [date()](https://www.php.net/manual/ru/function.date.php).|Зависит от платформы, в большинстве случаев от -2147483648 до 2147483647.|

Array
(

    [seconds] => 40
    [minutes] => 58
    [hours]   => 21
    [mday]    => 17
    [wday]    => 2
    [mon]     => 6
    [year]    => 2003
    [yday]    => 167
    [weekday] => Tuesday
    [month]   => June
    [0]       => 1055901520
)

![[Pasted image 20240311104429.png]]Первым аргументом в date() является строка-шаблон, определяющая формат возвращаемой даты. Ее можно задать самому, используя специальные символы, а можно использовать [предопределенные шаблоны](https://www.php.net/manual/ru/class.datetimeinterface.php).

Если второй аргумент не передается, по умолчанию рассматривается текущие дата и время.

| **Символ в строке _format_** | **Описание**                                                                                                               | **Пример возвращаемого значения**                                  |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| _a_                          | Ante meridiem или Post meridiem в нижнем регистре                                                                          | _am_ или _pm_                                                      |
| _A_                          | Ante meridiem или Post meridiem в верхнем регистре                                                                         | _AM_ или _PM_                                                      |
| _B_                          | Время в стадарте Swatch Internet                                                                                           | От _000_ до _999_                                                  |
| _c_                          | Дата в формате ISO 8601 (добавлено в PHP 5)                                                                                | 2004-02-12T15:19:21+00:00                                          |
| _d_                          | День месяца, 2 цифры с ведущими нулями                                                                                     | от _01_ до _31_                                                    |
| _D_                          | Сокращенное наименование дня недели, 3 символа                                                                             | от _Mon_ до _Sun_                                                  |
| _F_                          | Полное наименование месяца, например January или March                                                                     | от _January_ до _December_                                         |
| _g_                          | Часы в 12-часовом формате без ведущих нулей                                                                                | От _1_ до _12_                                                     |
| _G_                          | Часы в 24-часовом формате без ведущих нулей                                                                                | От _0_ до _23_                                                     |
| _h_                          | Часы в 12-часовом формате с ведущими нулями                                                                                | От _01_ до _12_                                                    |
| _H_                          | Часы в 24-часовом формате с ведущими нулями                                                                                | От _00_ до _23_                                                    |
| _i_                          | Минуты с ведущими нулями                                                                                                   | _00_ to _59_                                                       |
| _I_ (заглавная i)            | Признак летнего времени                                                                                                    | _1_, если дата соответствует летнему времени, иначе _0_ otherwise. |
| _j_                          | День месяца без ведущих нулей                                                                                              | От _1_ до _31_                                                     |
| _l_ (строчная 'L')           | Полное наименование дня недели                                                                                             | От _Sunday_ до _Saturday_                                          |
| _L_                          | Признак високосного года                                                                                                   | _1_, если год високосный, иначе _0_.                               |
| _m_                          | Порядковый номер месяца с ведущими нулями                                                                                  | От _01_ до _12_                                                    |
| _M_                          | Сокращенное наименование месяца, 3 символа                                                                                 | От _Jan_ до _Dec_                                                  |
| _n_                          | Порядковый номер месяца без ведущих нулей                                                                                  | От _1_ до _12_                                                     |
| _O_                          | Разница с временем по Гринвичу в часах                                                                                     | Например: _+0200_                                                  |
| _r_                          | Дата в формате RFC 2822                                                                                                    | Например: _Thu, 21 Dec 2000 16:01:07 +0200_                        |
| _s_                          | Секунды с ведущими нулями                                                                                                  | От _00_ до _59_                                                    |
| _S_                          | Английский суффикс порядкового числительного дня месяца, 2 символа                                                         | _st_, _nd_, _rd_ или _th_. Применяется совместно с _j_             |
| _t_                          | Количество дней в месяце                                                                                                   | От _28_ до _31_                                                    |
| _T_                          | Временная зона на сервере                                                                                                  | Примеры: _EST_, _MDT_ ...                                          |
| _U_                          | Количество секунд, прошедших с начала Эпохи Unix (The Unix Epoch, 1 января 1970, 00:00:00 GMT)                             | См. также **time()**                                               |
| _w_                          | Порядковый номер дня недели                                                                                                | От _0_ (воскресенье) до _6_ (суббота)                              |
| _W_                          | Порядковый номер недели года по ISO-8601, первый день недели - понедельник (добавлено в PHP 4.1.0)                         | Например: _42_ (42-я неделя года)                                  |
| _Y_                          | Порядковый номер года, 4 цифры                                                                                             | Примеры: _1999_, _2003_                                            |
| _y_                          | Номер года, 2 цифры                                                                                                        | Примеры: _99_, _03_                                                |
| _z_                          | Порядковый номер дня в году (нумерация с 0)                                                                                | От _0_ до _365_                                                    |
| _Z_                          | Смещение временной зоны в секундах. Для временных зон западнее UTC это отрицательное число, восточнее UTC - положительное. | От _-43200_ до _43200_                                             |
strings
```php
<?php
    $str = " Строка, введенная пользователем ";
    echo "<pre>$str</pre>";
    echo "Количество байт в строке: " . strlen($str);
    echo "<br>Количество символов в строке: " . mb_strlen($str);
    echo "<br>Позиция слова 'Строка': " . strpos($str,'Строка');
    echo "<br>Последовательность символов от 5 длиной 5(чего?): " . substr($str,5,5);
    echo "<br>'строка' совпадает с последовательностью
    символов с 1 длиной 6 без учета регистра? "
    . (strcasecmp('строка', mb_substr($str, 1, 6)) == 0 ? 'Да.' : 'Нет.');
    echo " А должна бы.";
    echo "<br>".(strcasecmp('str', mb_substr('String',0,3)) == 0 ? 'Да.' : 'Нет.');
    $text = "Это очень длиииииииииииииииинное слово. И что-то еще.";
    echo "<br>$text";
    echo "<br>Не режем длинные слова:<br>".wordwrap($text, 10, "<br>", false);
    echo "<br>Режем длинные слова неправильно:<br>".wordwrap($text, 10, "<br>", true);
    echo "<br>Режем длинные слова правильно:<br>";
    $converted = iconv('UTF-8','windows-1251',$text);   //конвертируем в кириллическую кодировку
    $wrapped = wordwrap($converted, 10, "<br>", true);  //разбиваем по строкам
    echo iconv('windows-1251','UTF-8',$wrapped);        //перед выводом конвертируем обратно в UTF-8
?>
```

dates
```php
<?php
    $today = date("F j, Y, g:i a"); echo "1) ".$today . "<br>";  
    $today = date("m.d.y"); echo "2) ".$today . "<br>";                        
    $today = date("j, n, Y"); echo "3) ".$today . "<br>";                      
    $today = date("Ymd"); echo "4) ".$today . "<br>";                          
    $today = date('h-i-s, j-m-y, it is w Day z '); echo "5) ".$today . "<br>";  
    $today = date('\i\t \i\s \t\h\e jS \d\a\y.'); echo "6) ".$today . "<br>";  
    $today = date("D M j G:i:s T Y"); echo "7) ".$today . "<br>";              
    $today = date('H:m:s \m \i\s\ \m\o\n\t\h'); echo "8) ".$today . "<br>";    
    $today = date("H:i:s"); echo "9) ".$today . "<br>";                        
?>
```


### Условия и циклы. Функции
#### условный оператор if
```php
 <?php
   if($i) {      // внутренний блок if($i)
     if($a) инструкция;
     if($b) инструкция;
     else  инструкция; // этот else относится к if($b)
 }
   else инструкция; // этот else относится к if($i)
 ?>
```
![[Pasted image 20240311105042.png]]
#### тернарный условный оператор ? :
![[Pasted image 20240311105119.png]]
![[Pasted image 20240311105144.png]]
#### условный оператор switch
```php
$action = 'JUMP';
  switch ($action) {
    case 'JUMP':
      echo "Мне нравится прыгать.<br>";
      $action = 'SWEEM';
    case 'SWEEM':
      echo "Я люблю плавать.<br>"; break;
    case 'FLY':
      echo "Хотел бы я научиться летать.<br>"; continue;
    default:
      echo 'Что-то мне вообще лень что-либо делать.<br>';
  }
```
#### цикл с предусловием
![[Pasted image 20240311105529.png]]
#### цикл с постусловием do..while
![[Pasted image 20240311105609.png]]
#### цикл с параметрами for
for (часть1; часть2; часть3) {...}
• Часть 1 выполняется единожды при первом вхождении в цикл
• Часть 2 возвращает булево значение в конце каждой итерации (или преобразуется в него). Если было получено true – цикл пойдет на новую итерацию, если false – цикл завершится
• Часть 3 выполняется в конце каждой итерации
• Каждое из выражений может быть пустым или содержать несколько выражений, разделённых запятыми
• В  Части 2 все выражения, разделённые запятыми, вычисляются, но результат берётся из последнего
![[Pasted image 20240311105706.png]]
![[Pasted image 20240311105718.png]]
#### оператор безусловного перехода goto
![[Pasted image 20240311105748.png]]
#### альтернативный синтаксис конструкций
Вместо фигурных скобок во многих конструкциях можем использовать в качестве открывающего элемента знак ‘:’, а в качестве закрывающего ключевое слово, соответствующее конкретной конструкции.
![[Pasted image 20240311105951.png]]
#### функции
Синтаксис определения функции выглядит следующим образом:
function имя_функции([параметры]) {
    тело_функции(блок инструкций)
}
![[Pasted image 20240311110044.png]]
#### передача аргумента по значению
![[Pasted image 20240311110123.png]]
#### передача аргумента по ссылке
![[Pasted image 20240311110155.png]]
#### Значение аргумента по умолчанию
![[Pasted image 20240311110224.png]]
#### локальные и глобальные переменные
В пределах функции всегда будем обращаться к локальной переменной. Для доступа к глобальной необходимо либо использовать ключевое слово global, либо воспользоваться ассоциативным массивом GLOBALS, в котором ключ – имя глобальной переменной, а его значение – значение переменной.
```php
$age = 30; 
function birth() {
    global $age;
    $age = $age + 1;
}
birth();
echo $age; //выведет 31
```

```php
$a = 1
$b = 2;
function Sum() {
  $GLOBALS['b'] = $GLOBALS['a'] + $GLOBALS['b'];
}
Sum();
echo $b; //выведет 3
```
#### суперглобальные переменные
| Имя переменной | Описание                                                                                                                                                                                                    |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| $GLOBALS       | Содержит все глобальные переменные, доступные локальному сценарию. Имена переменных используются в качестве индексов массива.                                                                               |
| $_SERVER       | Содержит информацию об окружении веб-сервера.                                                                                                                                                               |
| $_GET          | Содержит информацию о запросах GET (при отправке форм). Эти значения следует проверять перед использованием.                                                                                                |
| $_POST         | Содержит информацию о запросах POST (другой тип отправки данных формы). Эти значения следует проверять перед использованием.                                                                                |
| $_FILES        | Содержит информацию о файлах, загружаемых методом POST.                                                                                                                                                     |
| $_COOKIE       | Содержит информацию о cookies HTTP                                                                                                                                                                          |
| $_SESSION      | Содержит информацию из всех переменных, зарегистрированных в рамках сессии.                                                                                                                                 |
| $_REQUEST      | Содержит информацию о пользовательском вводе. Эти значения следует проверять перед использованием. Вместо этого массива следует использовать $_GET, $_POST или $_COOKIE, т.к. они более специализированные. |
#### статические переменные
Переменные, которые не исчезают после завершения работы функции
![[Pasted image 20240311110655.png]]
#### вызов функции по символической ссылке
Функцию можно присвоить переменной, так же как и обычное значение. Для этого имя функции должно быть присвоено переменной в виде строки.
![[Pasted image 20240311110734.png]]
#### анонимные функции
Данная возможность похожа на вызов функции по символической ссылке, но мы сразу присваиваем переменной функцию, а не ее имя.
![[Pasted image 20240311110912.png]]

### Два типа PHP-массивов и особенности работы с ними
#### понятие массив
 x Массив - список однотипных элементов.
 v Массив - это упорядоченное отображение, которое устанавливает соответствие между значением и ключом.
 Может быть использован как собственно массив, список (вектор), хеш-таблица (карта), словарь, коллекция, стек, очередь.
 Существует два типа массивов, различающиеся по способу идентификации элементов:
- Индексированные (доступ по индексу-числу)
- Ассоциативные (доступ по ключу)

#### одномерные массивы
• Обобщенный синтаксис элементов одномерного индексированного массива:  
  $имя[индекс];
• Обобщенный синтаксис элементов одномерного ассоциативного массива:
  $имя["ключ"]; 
 Чтобы включить новый элемент в конец массива, можно просто присвоить значение переменной массива без указания индекса.

#### многомерные массивы
Многомерным является массив, в котором один или несколько элементов также являются массивами. При этом допустимо несколько уровней вложенности массивов.

Элементы в многомерных индексируемых массивах определяются несколькими индексами вместо одного:

  $имя[индекс1][индекс2]..[индексN];

Ссылки на элементы многомерных массивов внутри строк отличаются от ссылок на другие типы данных:
![[Pasted image 20240311112439.png]]
#### смешанное индексирование
В многомерных массивах допускается смешанное индексирование (числовое и ассоциативное).

Пример – запись данных об игроках различных команд, где команда обозначается номером, данные о конкретном игроке записываются через его никнейм:
![[Pasted image 20240311112516.png]]
#### определение массива
Языковая конструкция array([элемент1, элемент2...]) получает ноль или более элементов и возвращает массив, состоящий из указанных элементов.
![[Pasted image 20240311112620.png]]

#### присваивание списку переменных значений массива
Языковая конструкция list(переменная1 [, переменная2 , ...]) используется для того, чтобы присвоить списку переменных значения за одну операцию
![[Pasted image 20240311112713.png]]
#### определение размера массива
![[Pasted image 20240311112827.png]]
#### получение диапазона значений
Языковая конструкция range() позволяет создать массив элементов из интервала, определяемого верхней и нижней границами.
![[Pasted image 20240311112854.png]]
#### поиск элементов в массиве
Функция in_array() проверяет, присутствует ли в массиве заданный элемент
![[Pasted image 20240311112923.png]]
#### получение ключей и значение массива
Функция array_keys() возвращает массив, содержащий все ключи исходного массива, переданного в качестве параметра.
![[Pasted image 20240311113034.png]]
Функция array_values() возвращает массив, состоящий из всех значений исходного массива.
![[Pasted image 20240311113204.png]]
#### добавление и удаление элементов
Функция array_push() присоединяет (то есть дописывает в конец массива) один или несколько новых элементов:
![[Pasted image 20240311113407.png]]
Функция array_pop() извлекает последний элемент из массива
![[Pasted image 20240311113425.png]]
Функция array_shift() удаляет элемент из начала массива.
![[Pasted image 20240311113459.png]]
array_unshift() добавляет один или несколько элементов в начало массива
![[Pasted image 20240311113506.png]]
 Функция array_pad() позволяет быстро увеличить массив до желаемого размера посредством его дополнения стандартными элементами.
 ![[Pasted image 20240311113651.png]]
 Функция array_unique() убирает повторяющиеся значения из массива
 ![[Pasted image 20240311113759.png]]
 
#### перебор элементов в массиве
  Функция next() смещает указатель на одну позицию вперед, после чего возвращает элемент, находящийся в новой позиции.

 Функция prev() действует как next(), но в обратную сторону.

 Функция current() просто возвращает значение элемента массива, на который указывает его внутренний указатель, а key() – ключ.
 ![[Pasted image 20240311114006.png]]
  Функция reset() переводит внутренний указатель текущей позиции в массиве к первому элементу.

 Функция end() перемещает указатель к позиции последнего элемента массива.
 ![[Pasted image 20240311114036.png]] Функция array_walk() позволяет применить функцию к нескольким (а возможно, всем) элементам массива.
 ![[Pasted image 20240311114445.png]]
  Функция array_walk() позволяет применить функцию ко всем элементам массива.
  ![[Pasted image 20240311114524.png]]
#### реорганизация массива
 Функция array_reverse() инвертирует порядок элементов в массиве.
 Функция array_flip() меняет местами ключи и значения элементов массива.
 ![[Pasted image 20240311114637.png]]

#### сортировка массива
 sort() — Сортирует массив по возрастанию
 ![[Pasted image 20240311114734.png]]
 rsort() — Сортирует массив по убыванию
 ![[Pasted image 20240311114743.png]]
  asort() — Сортирует массив по возрастанию с поддержкой ассоциативности
  arsort() — Сортирует массив по убыванию с поддержкой ассоциативности
  ![[Pasted image 20240311114809.png]]
   ksort()/krsort() — Сортирует массив по ключу в порядке возрастания/убывания
   ![[Pasted image 20240311114835.png]]

#### операции теории множеств
   Функция array_merge() объединяет от 1 до N массивов в порядке их перечисления
   ![[Pasted image 20240311115025.png]]
   Функция array_intersect() объединяет возвращает пересечение массивов
   ![[Pasted image 20240311115045.png]]

#### иные операции с массивами
• Функция shuffle( ) сортирует элементы массива в случайном порядке
![[Pasted image 20240311115126.png]]
• array_slice() возвращает часть массива
![[Pasted image 20240311115151.png]]
• array_splice() заменяет часть массива
![[Pasted image 20240311115216.png]]


## Работа с файловой системой
### проверка существования файла
Функция file_exists(string файл) проверяет, существует ли заданный файл или каталог.
![[Pasted image 20240311115857.png]]
Функция is_file(string файл), которая проверяет существование заданного файла и возможность выполнения с ним операций чтения/записи.
![[Pasted image 20240311115919.png]]
### определение размера файла
Функция filesize(string имя_файла) возвращает размер (в байтах) файла с заданным именем.
![[Pasted image 20240311120036.png]]

### открытие и закрытие файлов
Функция fopen(string $filename, string $mode) открывает файл $filename (если он существует) в режиме $mode и возвращает целое число – файловый манипулятор (file handle).

| Режим | Описание                                                         |
| ----- | ---------------------------------------------------------------- |
| r     | Только чтение. Указатель в начало.                               |
| r+    | Чтение и запись. Указатель в начало.                             |
| w     | Только запись. Указатель в начало файла, содержимое стирается.   |
| w+    | Чтение и запись. Указатель в начало файла, содержимое стирается. |
| a     | Только запись. Указатель в конец файла.                          |
| a+    | Чтение и запись. Указатель в конец файла.                        |
Функция fclose(int file_handle) закрывает файл с заданным манипулятором.
```php
$filename = "somefolder/otherfile.txt";
$handle = fopen($filename,'r') or die("File ($filename) does not exist!");
/*  
  используем файл
*/
fclose($handle);
$site = "http://www.php.net";
$sh = fopen($site, "r");
/*
  считываем данные с сайта
*/
fclose($sh);
```

### запись в файл
Функция is_writable (string файл) / is_writeable позволяет убедиться в том, что файл или директория существует и для него разрешена операция записи.
Функция fwrite(int манипулятор, string переменная [, int длина]) / fputs записывает содержимое строковой переменной в файл, заданный файловым манипулятором.
```php
$data = "08:13:00|12:37:12|208.247.106.187|Win11";
$filename = "somefolder/datafile.txt";
if (is_writeable($filename)):
    $fh = fopen($filename, "a+");
    $success = fwrite($fh, $data);
    fclose($fh);
else:
    print "Could not open $filename for writing";
endif;
```
![[Pasted image 20240311120347.png]]

### чтение из файла
• Функция is_readable(int манипулятор) позволяет убедиться в том, что файл или директория существует и доступен для чтения.

• Функция fgetc(int манипулятор) возвращает строку, содержащую один символ из файла в текущей позиции указателя, или false при достижении конца файла.

• Функция fgets(int манипулятор [,int длина]), возвращает строку, прочитанную от текущей позиции указателя в файле.

• Функция fgetss() полностью аналогична fgets() за одним исключением – она пытается удалять из прочитанного текста все теги HTML и PHP.

```php
$filename = "somefolder/datafile.txt";
if (is_readable($filename)):
    $fh = fopen($filename, "r");
    while (!feof($fh)) {
        $line = fgets($fh, 4096);
        print $line. "<br>";
    }
    fclose($fh);
endif;
```

### чтение файла в массив
 Функция file(string файл [, int флаги]) загружает все содержимое файла в индексируемый массив. Каждый элемент массива соответствует одной строке файла.
```php
$filename = "http://schedule.ispu.ru/";
$lines = file($filename);
foreach ($lines as $line_num => $line):
    echo "Строка #<b>{$line_num}</b> : ".htmlspecialchars($line)."<br />\n";
endforeach;
```
![[Pasted image 20240311120556.png]]
### вывод файла в браузер
 Функция readfile (string файл [, int включение_пути]) читает содержимое файла и направляет его в стандартный вывод (в большинстве случаев – в браузер).
```php
$filename = "somefolder/datafile.txt";
if (file_exists($filename)) {
    header('Content-Description: File Transfer');
    header('Content-Type: text/plain');
    header('Content-Disposition: attachment; filename="'.basename($filename).'"');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: no-cache');
    header('Content-Length: ' . filesize($filename));
    readfile($filename);
}
```

### запуск внешних программ
Функция exec (string команда [, string массив [, int возврат]]) запускает заданную программу и возвращает последнюю строку ее выходных данных. Все выходные данные команды можно сохранить в необязательном параметре «массив». Кроме того, если при заданном параметре «массив» также задается переменная «возврат», последней присваивается код возврата выполненной команды.
![[Pasted image 20240311120737.png]]

### вывод результата выполнения команды
Функция passthru(string команда, int возврат) работает почти так же, как ехес(), за одним исключением – она автоматически выводит результаты выполнения команды. Если при вызове passthru() передается необязательный параметр возврат, этой переменной присваивается код возврата выполненной команды.
Функция escapeshellcmd (string команда) экранирует все потенциально опасные символы, которые могут быть введены пользователем (например, на форме HTML), для выполнения команд exec(), passthru(), system() или fореn().
![[Pasted image 20240311120951.png]]
### работа с путями файлов
• Функция basename(string полное_имя) выделяет имя файла из переданного полного имени.
• Функция dirname (string путь) дополняет basename() – она извлекает путь из полного имени файла.
![[Pasted image 20240311121023.png]]

### работа с каталогами
• mkdir (string путь, int режим, bool рекурсивно) делает то же, что и одноименная команда UNIX, – она создает новый каталог.

• is_dir (string имя_файла) проверяет, является ли файл с заданным именем каталогом.

• opendir (string путь) открывает манипулятор для работы с каталогом, а closedir(int манипулятор_каталога), соответственно закрывает.

• Функция readdir(int манипулятор) возвращает очередной элемент заданного каталога.
![[Pasted image 20240311121100.png]]
• getcwd() получает имя текущего рабочего каталога
• chdir (string каталог) осуществляет переход в каталог, заданный параметром
• scandir (string каталог) получает список файлов и каталогов, расположенных по указанному пути
![[Pasted image 20240311121124.png]]
### получение информации о файле
Функция stat(string имя_файла) возвращает смешанный массив с подробной информацией о файле с заданным именем

| Индекс | Данные                                           |
| ------ | ------------------------------------------------ |
| 0      | Устройство                                       |
| 1      | Индексный узел (inode)                           |
| 2      | Режим защиты индексного узла                     |
| 3      | Количество ссылок                                |
| 4      | Идентификатор пользователя владельца             |
| 5      | Идентификатор группы владельца                   |
| 6      | Тип устройства индексного узла                   |
| 7      | Размер в байтах                                  |
| 8      | Время последнего обращения                       |
| 9      | Время последней модификации                      |
| 10     | Время последнего изменения                       |
| 11     | Размер блока при вводе/выводе в файловой системе |
| 12     | Количество выделенных блоков                     |
![[Pasted image 20240311121306.png]]

### копирование и переименование файлов
• Функция сору(string источник, string приемник) пытается скопировать файл источник в файл приемник.
• Rename (string старое_имя, string новое_имя) переименовывает файл.
• Unlink(string файл) удаляет файл с заданным именем.
```php
$filename = "somefolder/datafile.txt";
$newfile = "somefolder/newfile.txt";
if (!copy($filename, $newfile))
    echo "не удалось скопировать $filename...\n";
if (!rename("somefolder/newfile.txt", "somefolder/otherfile.txt"))
    echo "не удалось переименовать $filename...\n";
if (!unlink("somefolder/otherfile.txt"))
    echo "не удалось удалить $filename...\n";
```